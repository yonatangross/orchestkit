// OrchestKit Hooks - posttool bundle
// Generated: 2026-01-26T07:47:40.194Z

var x=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(n,e)=>(typeof require<"u"?require:n)[e]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});function or(t){return typeof t.command=="string"}function ir(t){return typeof t.file_path=="string"&&typeof t.content=="string"}function ar(t){return typeof t.file_path=="string"&&typeof t.old_string=="string"&&typeof t.new_string=="string"}function cr(t){return typeof t.file_path=="string"&&t.content===void 0}import{appendFileSync as et,existsSync as nt,statSync as ee,renameSync as ne,mkdirSync as se}from"node:fs";function st(){return process.env.CLAUDE_PLUGIN_ROOT?`${process.env.HOME}/.claude/logs/ork`:`${p()}/.claude/logs`}function p(){return process.env.CLAUDE_PROJECT_DIR||"."}function T(){return process.env.CLAUDE_PLUGIN_ROOT||process.env.CLAUDE_PROJECT_DIR||"."}function f(){return process.env.CLAUDE_SESSION_ID||`fallback-${process.pid}-${Date.now()}`}function dr(t){if(process.env.ORCHESTKIT_BRANCH)return process.env.ORCHESTKIT_BRANCH;let{execSync:n}=x("node:child_process");try{let e=n("git branch --show-current",{cwd:t||p(),encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}).trim();return process.env.ORCHESTKIT_BRANCH=e,e}catch{return"unknown"}}function re(){return process.env.ORCHESTKIT_LOG_LEVEL||"warn"}function oe(t){let n=["debug","info","warn","error"];return n.indexOf(t)>=n.indexOf(re())}function a(){return{continue:!0,suppressOutput:!0}}function pr(){return{continue:!0,suppressOutput:!0,hookSpecificOutput:{permissionDecision:"allow"}}}function gr(t){return{continue:!1,stopReason:t,hookSpecificOutput:{permissionDecision:"deny",permissionDecisionReason:t}}}function mr(t){return{continue:!0,suppressOutput:!0,hookSpecificOutput:{hookEventName:"PostToolUse",additionalContext:t}}}function fr(t){return{continue:!0,suppressOutput:!0,hookSpecificOutput:{hookEventName:"UserPromptSubmit",additionalContext:t}}}function hr(t,n){let e={continue:!0,hookSpecificOutput:{hookEventName:"PreToolUse",additionalContext:t,permissionDecision:"allow"}};return n?e.systemMessage=n:e.suppressOutput=!0,e}function yr(t){return{continue:!0,systemMessage:t}}function kr(t){return{continue:!0,systemMessage:`\u26A0 ${t}`}}function Sr(t){return{continue:!1,stopReason:t,hookSpecificOutput:{hookEventName:"PreToolUse",permissionDecision:"deny",permissionDecisionReason:t}}}var ie=200*1024,ae=100*1024;function rt(t,n){if(nt(t))try{if(ee(t).size>n){let s=`${t}.old.${Date.now()}`;ne(t,s)}}catch{}}function ot(t){nt(t)||se(t,{recursive:!0})}function u(t,n,e="debug"){if(!oe(e))return;let s=st(),r=`${s}/hooks.log`;try{ot(s),rt(r,ie);let o=new Date().toISOString().replace("T"," ").slice(0,19);et(r,`[${o}] [${e.toUpperCase()}] [${t}] ${n}
`)}catch{}}function _r(t,n,e){let s=st(),r=`${s}/permission-feedback.log`;try{ot(s),rt(r,ae);let o=new Date().toISOString(),i=e?.tool_name||process.env.HOOK_TOOL_NAME||"unknown",c=e?.session_id||f();et(r,`${o} | ${t} | ${n} | tool=${i} | session=${c}
`)}catch{}}function br(){try{let t=[],e=Buffer.allocUnsafe(256),s,r=0,{readSync:o}=x("node:fs");for(;;)try{if(s=o(r,e,0,256,null),s===0)break;t.push(Buffer.from(e.subarray(0,s)))}catch{break}let i=Buffer.concat(t).toString("utf8").trim();return i?JSON.parse(i):{tool_name:"",session_id:f(),tool_input:{}}}catch{return{tool_name:"",session_id:f(),tool_input:{}}}}function g(t,n){let e=n.replace(/^\./,"").split("."),s=t;for(let r of e){if(s==null)return;s=s[r]}return s}function xr(t){return t.replace(/\\\s*[\r\n]+/g," ").replace(/\n/g," ").replace(/\s+/g," ").trim()}function $r(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}import{execSync as v}from"node:child_process";function ce(t){let n=t||p();try{return v("git branch --show-current",{cwd:n,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}).trim()}catch{return"unknown"}}function ue(t){let n=t||ce();return["dev","main","master"].includes(n)}function Ir(t){let n=t||p();try{return v("git rev-parse --show-toplevel",{cwd:n,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}).trim()}catch{return n}}function wr(t){let n=t||p();try{return v("git rev-parse --git-dir",{cwd:n,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}),!0}catch{return!1}}function le(t){let n=t||p();try{return v("git status --short",{cwd:n,encoding:"utf8",timeout:1e4,stdio:["pipe","pipe","pipe"]}).trim()}catch{return""}}function Rr(t){return le(t).length>0}function Tr(t){let n=t||p();try{return v("git rev-parse --verify main",{cwd:n,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}),"main"}catch{try{return v("git rev-parse --verify master",{cwd:n,encoding:"utf8",timeout:5e3,stdio:["pipe","pipe","pipe"]}),"master"}catch{return"main"}}}function de(t){let n=[/issue\/(\d+)/i,/feature\/(\d+)/i,/fix\/(\d+)/i,/bug\/(\d+)/i,/feat\/(\d+)/i,/^(\d+)-/,/-(\d+)$/,/#(\d+)/];for(let e of n){let s=t.match(e);if(s)return parseInt(s[1],10)}return null}function Ar(t){if(ue(t))return null;let n=["issue/","feature/","fix/","bug/","feat/","chore/","docs/","refactor/","test/","ci/","perf/","style/","release/","hotfix/"];return n.some(s=>t.startsWith(s))?t.startsWith("issue/")&&!de(t)?"issue/ branches should include an issue number (e.g., issue/123-description)":null:`Branch name should start with a valid prefix: ${n.join(", ")}`}import{appendFileSync as pe,existsSync as at,mkdirSync as ge,statSync as me,renameSync as fe}from"node:fs";var it="/tmp/claude-read-count";function A(t){let n=t.tool_name||"";if(["Read","Glob","Grep"].includes(n))try{let{readFileSync:r,writeFileSync:o}=x("node:fs"),i=0;try{i=parseInt(r(it,"utf8").trim(),10)||0}catch{}if(i++,o(it,String(i)),i%10!==0)return a()}catch{}let e=process.env.CLAUDE_PROJECT_DIR||".",s=`${e}/.claude/logs/audit.log`;try{let r=`${e}/.claude/logs`;at(r)||ge(r,{recursive:!0}),he(s,200*1024);let o=new Date().toISOString().replace("T"," ").slice(0,19),i="";switch(n){case"Bash":{i=(g(t,"tool_input.command")||"").substring(0,100);break}case"Write":case"Edit":{i=g(t,"tool_input.file_path")||"";break}case"Task":{i=g(t,"tool_input.subagent_type")||"";break}}let c=i?`[${o}] ${n} | ${i}
`:`[${o}] ${n}
`;pe(s,c)}catch{}return a()}function he(t,n){if(at(t))try{if(me(t).size>n){let s=`${t}.old.${Date.now()}`;fe(t,s)}}catch{}}import{existsSync as I,appendFileSync as ye,readFileSync as R,writeFileSync as D,mkdirSync as lt,statSync as ke,renameSync as Se}from"node:fs";import{createHash as dt}from"node:crypto";var ct=/error:|Error:|ERROR|FATAL|exception|failed|denied|not found|does not exist|connection refused|timeout|ENOENT|EACCES|EPERM/i,_e=/^(echo |ls |ls$|pwd|cat |head |tail |wc |date|whoami)/,ut=2e3,be=10,xe=3,$e=1e3*1024;function Ee(t){let n=String(g(t,"tool_output")||t.tool_output||""),e=String(t.tool_error||g(t,"error")||""),s=t.exit_code??0,r=!1,o="",i="";if(s!==0&&s!==void 0&&(r=!0,o="exit_code",i=`Exit code: ${s}`),e&&(r=!0,o=o||"tool_error",i=i||e),ct.test(n)){r=!0,o=o||"output_pattern";let c=n.split(`
`).filter(l=>ct.test(l));i=i||c[0]||""}return{isError:r,errorType:o,errorMessage:i,errorText:e||n}}function Ce(t){if(I(t))try{ke(t).size>$e&&Se(t,`${t}.old.${Date.now()}`)}catch{}}function ve(t,n){let e=p(),s=`${e}/.claude/logs/errors.jsonl`,r="/tmp/claude-session-errors.json";try{lt(`${e}/.claude/logs`,{recursive:!0}),Ce(s);let o=dt("md5").update(JSON.stringify(t.tool_input||{})).digest("hex"),i={timestamp:new Date().toISOString(),tool:t.tool_name,session_id:f(),error_type:n.errorType,error_message:n.errorMessage.substring(0,500),input_hash:o,tool_input:t.tool_input,output_preview:n.errorText.substring(0,1e3)};ye(s,JSON.stringify(i)+`
`);try{let c={error_count:0,last_error_tool:"",last_error_time:""};I(r)&&(c=JSON.parse(R(r,"utf8"))),c.error_count=(c.error_count||0)+1,c.last_error_tool=t.tool_name||"",c.last_error_time=new Date().toISOString(),D(r,JSON.stringify(c,null,2))}catch{}u("unified-error-handler",`ERROR: ${t.tool_name} - ${n.errorType}`)}catch{u("unified-error-handler",`ERROR (fallback): ${t.tool_name}`)}}function Ie(t,n){if(!I(n))return null;try{let e=JSON.parse(R(n,"utf8")),s=t.toLowerCase();for(let r of e.patterns||[])if(r.regex)try{if(new RegExp(r.regex,"i").test(s))return r}catch{}}catch{}return null}function we(t,n,e){if(!I(e))try{lt(x("path").dirname(e),{recursive:!0}),D(e,JSON.stringify({suggestions:{},prompt_count:0}))}catch{return!0}try{let s=JSON.parse(R(e,"utf8")),r=dt("md5").update(`${t}|${n.substring(0,100)}`).digest("hex"),o=(s.prompt_count||0)+1;s.prompt_count=o;let i=s.suggestions[r]?.prompt_count||0;return i===0||o-i>=be?(s.suggestions[r]={pattern_id:t,prompt_count:o},D(e,JSON.stringify(s,null,2)),!0):(D(e,JSON.stringify(s,null,2)),!1)}catch{return!0}}function Re(t,n){let e=`${n}/${t}/SKILL.md`;if(!I(e))return"";try{let r=R(e,"utf8").match(/^---\n([\s\S]*?)\n---/);if(r){let o=r[1].match(/description:\s*(.+)/);if(o)return o[1].trim()}}catch{}return""}function Te(t,n,e){let s=t.solution?.brief||"An error was detected.",r=t.solution?.steps||[],o=`## Error Solution

`;o+=`**${s}**

`,r.length>0&&(o+=`### Quick Fixes

`,r.forEach((d,h)=>{o+=`  ${h+1}. ${d}
`}),o+=`
`);let i=t.skills||[],c=[];if(t.category&&I(n))try{c=JSON.parse(R(n,"utf8")).categories?.[t.category]?.related_skills||[]}catch{}let l=[...new Set([...i,...c])].slice(0,xe);if(l.length>0){o+=`### Related Skills

`;for(let d of l){let h=Re(d,e);o+=h?`- **${d}**: ${h}
`:`- **${d}**
`}o+="\nUse `/ork:<skill-name>` or `Read skills/<skill-name>/SKILL.md`"}return o.length>ut?o.substring(0,ut-20)+`...

(truncated)`:o}function pt(t){let n=t.tool_name||"";if(n==="Bash"){let s=g(t,"tool_input.command")||"";if(_e.test(s))return a()}let e=Ee(t);if(!e.isError)return a();if(ve(t,e),n==="Bash"){let s=T(),r=`${s}/.claude/rules/error_solutions.json`,o=`${s}/skills`,i=`/tmp/claude-error-suggestions-${f()}.json`,c=Ie(e.errorText.substring(0,2e3),r);if(c&&we(c.id,e.errorText,i)){let l=Te(c,r,o);if(l)return u("unified-error-handler",`Suggesting solution for pattern: ${c.id}`),{continue:!0,hookSpecificOutput:{additionalContext:l}}}}return a()}import{existsSync as Ae}from"node:fs";import{execSync as w}from"node:child_process";function De(t){switch(t.split(".").pop()?.toLowerCase()){case"py":return"python";case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"json":return"json";case"css":case"scss":return"css";default:return null}}function V(t){try{return w(`which ${t}`,{stdio:"ignore"}),!0}catch{return!1}}function gt(t){let n=t.tool_name||"";if(n!=="Write"&&n!=="Edit")return a();let e=g(t,"tool_input.file_path")||"";if(!e||e.includes("/.claude/")||e.includes("/node_modules/")||e.includes("/.git/")||e.includes("/dist/")||e.endsWith(".lock"))return a();let s=process.env.CLAUDE_PROJECT_DIR||".",r=e.startsWith("/")?e:`${s}/${e}`;if(!Ae(r))return a();if(process.env.SKIP_AUTO_LINT==="1")return a();let o=De(e);if(!o)return a();let i=0,c=!1;try{switch(o){case"python":if(V("ruff")){try{let l=w(`timeout 5s ruff check --output-format=concise "${r}" 2>&1`,{encoding:"utf8",stdio:["pipe","pipe","pipe"]});l&&(i=l.split(`
`).filter(Boolean).length,w(`timeout 5s ruff check --fix --unsafe-fixes=false "${r}" 2>/dev/null`,{stdio:"ignore"}),c=!0)}catch{}try{w(`timeout 5s ruff format "${r}" 2>/dev/null`,{stdio:"ignore"})}catch{}}break;case"typescript":case"javascript":if(V("biome"))try{let l=w(`timeout 5s biome check --write "${r}" 2>&1`,{encoding:"utf8",stdio:["pipe","pipe","pipe"]});l.includes("Fixed")&&(c=!0),l.includes("error")&&(i=(l.match(/error/g)||[]).length)}catch{}break;case"json":case"css":if(V("biome"))try{w(`timeout 5s biome format --write "${r}" 2>/dev/null`,{stdio:"ignore"}),c=!0}catch{}break}}catch(l){u("auto-lint",`Error: ${l}`)}if(c&&i>0){let l=e.split("/").pop();return{continue:!0,systemMessage:`Auto-lint: fixed issues, ${i} remaining in ${l}`}}return a()}import{existsSync as Y,readFileSync as ht,writeFileSync as H,statSync as Oe,mkdirSync as He}from"node:fs";var O=2200,mt=.7,je=.5,Ne=.1;function Pe(t){if(!Y(t))return 0;try{let n=Oe(t);return Math.floor(n.size/4)}catch{return 0}}function ft(){let n=`${p()}/context`,e=[`${n}/identity.json`,`${n}/session/state.json`,`${n}/knowledge/index.json`,`${n}/knowledge/blockers/current.json`],s=0;for(let r of e)s+=Pe(r);return s}function yt(){let t=parseInt(process.env.CLAUDE_MAX_CONTEXT||"200000",10);return Math.floor(t*(100-20)/100)}function Me(t){let n=yt();return n===0?!0:t/n>Ne}function Le(t,n){let s=`/tmp/claude-mcp-defer-state-${f()}.json`,r=yt(),o={mcp_deferred:t,context_tokens:n,effective_window:r,updated_at:new Date().toISOString(),reason:t?"context > 10% threshold":"context within limits"};try{H(s,JSON.stringify(o,null,2))}catch{}u("context-budget-monitor",`MCP defer state updated: defer=${t}, tokens=${n}, window=${r}`)}function Fe(){let n=`${p()}/context/session/state.json`;if(Y(n))try{let e=JSON.parse(ht(n,"utf8")),s={session_id:e.session_id,started:e.started,current_task:e.current_task,next_steps:(e.next_steps||[]).slice(-3),blockers:e.blockers,_compressed:!0,_compressed_at:new Date().toISOString(),_original_files_touched:(e.files_touched||[]).length,_original_decisions:(e.decisions_this_session||[]).length};H(n,JSON.stringify(s,null,2)),u("context-budget-monitor","Session state compressed")}catch{}}function Ue(){let t=p(),n=`${t}/context/knowledge/decisions/active.json`;if(Y(n))try{let e=JSON.parse(ht(n,"utf8")),s=e.decisions||[];if(s.length>10){u("context-budget-monitor","Archiving old decisions (keeping latest 5)...");let r=`${t}/context/archive/decisions`;He(r,{recursive:!0});let o=new Date,i=`${r}/${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}.json`;H(i,JSON.stringify(s.slice(0,-5),null,2)),e.decisions=s.slice(-5),H(n,JSON.stringify(e,null,2)),u("context-budget-monitor",`Archived ${s.length-5} decisions to ${i}`)}}catch{}}function kt(t){try{let n=ft(),e=n/O,s=Math.floor(e*100);u("context-budget-monitor",`Context usage: ${n} / ${O} tokens (${s}%)`);let r=Me(n);if(Le(r,n),e>mt){u("context-budget-monitor",`WARNING: Context usage (${s}%) exceeds threshold (${mt*100}%)`),u("context-budget-monitor","Triggering compression..."),Fe(),Ue();let o=ft(),i=o/O,c=Math.floor(i*100);u("context-budget-monitor",`After compression: ${o} / ${O} tokens (${c}%)`),i>je?u("context-budget-monitor","WARNING: Still above target. Manual review recommended."):u("context-budget-monitor","Compression successful. Target achieved.")}else u("context-budget-monitor","Context usage within budget. No compression needed.")}catch(n){u("context-budget-monitor",`Error: ${n}`)}return a()}import{existsSync as St,readFileSync as Be}from"node:fs";import{execSync as ze}from"node:child_process";function j(t){let n=p(),e=`${n}/.claude/coordination/lib/coordination.sh`;if(!St(e))return a();try{let s=`${n}/.claude/.instance_env`,r=process.env.CLAUDE_SESSION_ID||`fallback-${process.pid}`;if(St(s)){let i=Be(s,"utf8").match(/CLAUDE_INSTANCE_ID=["']?([^"'\n]+)/);i&&(r=i[1])}r&&ze(`source "${e}" && INSTANCE_ID="${r}" coord_heartbeat 2>/dev/null || true`,{shell:"/bin/bash",stdio:"ignore",timeout:5e3})}catch(s){u("coordination-heartbeat",`Heartbeat update failed: ${s}`)}return a()}function N(t){u("mem0-webhook-handler","Mem0 webhook handler starting");let n=t.tool_name||"",e=g(t,"tool_input.command")||"";if(n!=="Bash"||!e.includes("webhook-receiver.py"))return a();let s=g(t,"tool_result")||"";if(!s)return u("mem0-webhook-handler","No event data found in webhook call"),a();try{let r;try{r=JSON.parse(s)}catch{return u("mem0-webhook-handler","Could not parse event data"),a()}let o=r.result?.event_type||r.event_type||"",i=r.result?.memory_id||r.memory?.id||"";switch(u("mem0-webhook-handler",`Processing webhook event: ${o} (memory: ${i})`),o){case"memory.created":u("mem0-webhook-handler","Memory created - trigger graph sync");break;case"memory.updated":u("mem0-webhook-handler","Memory updated - trigger decision sync");break;case"memory.deleted":u("mem0-webhook-handler","Memory deleted - cleanup graph entities");break;default:u("mem0-webhook-handler",`Unknown event type: ${o}`);break}}catch(r){u("mem0-webhook-handler",`Error processing webhook: ${r}`)}return a()}import{existsSync as We}from"node:fs";var Je={Technology:/fastapi|react|typescript|python|postgres|redis|docker|kubernetes|langchain|langgraph|pgvector|qdrant|openai|anthropic|celery|rabbitmq|kafka|nginx|vite|tailwind|prisma|sqlalchemy|alembic|pydantic|zod/i,Pattern:/singleton|factory|repository|service|controller|adapter|facade|strategy|observer|decorator|middleware|dependency.injection|cursor.pagination|rate.limiting|circuit.breaker/i,Decision:/decided|chose|selected|will.use|adopted|standardized|migrated/i,Architecture:/microservice|monolith|event.driven|cqrs|event.sourcing|hexagonal|clean.architecture|ddd|api.gateway|load.balancer/i,Database:/postgresql|mysql|mongodb|sqlite|dynamodb|cassandra|schema|migration|index|query/i,Security:/jwt|oauth|cors|csrf|xss|sql.injection|rate.limit|encryption|authentication|authorization/i};function qe(t){let n=t.toLowerCase(),e=[];for(let[s,r]of Object.entries(Je)){let o=n.match(r);if(o)for(let i of[...new Set(o)].slice(0,5)){let c=i.split(/[\s-_]+/).map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join("-"),l="Used in project context";/decided.*/.test(n)&&n.includes(i)?l="Decided to use for project":/chose.*/.test(n)&&n.includes(i)?l="Chosen for implementation":/will.use.*/.test(n)&&n.includes(i)&&(l="Will be used in project"),e.push({name:c,entityType:s,observations:[l]})}}return e}function Ge(t,n){let e=t.toLowerCase(),s=[],r=n.map(o=>o.name);for(let o of r){let i=o.toLowerCase().replace(/-/g,".");for(let c of r){if(o===c)continue;let l=c.toLowerCase().replace(/-/g,".");new RegExp(`${i}.*(with|using|and|integrated|connected|for).*${l}`,"i").test(e)&&s.push({from:o,to:c,relationType:"uses"})}}return s}function P(t){switch(t.tool_name||""){case"mcp__mem0__add_memory":{u("memory-bridge","Processing mcp__mem0__add_memory - syncing to graph (primary)");let e=g(t,"tool_input.text")||"";if(!e||e.length<20)return u("memory-bridge","Memory text too short, skipping"),a();let r=`${T()}/bin/memory-fabric-agent.py`;We(r)&&u("memory-bridge","Memory Fabric Agent available for bidirectional sync");let i=qe(e),c=i.length;if(c===0)return u("memory-bridge","No entities extracted"),a();let l=Ge(e,i),d=l.length;u("memory-bridge",`Extracted ${c} entities and ${d} relations`);let h=i.slice(0,5).map(y=>`- ${y.name} (${y.entityType}): ${y.observations[0]||"observed"}`).join(`
`),k=`[Memory Bridge] Sync to Graph (primary storage)

Mem0 content should be synced to the knowledge graph for durability.
Detected ${c} entities to preserve:

${h}

Store in graph with mcp__memory__create_entities:
\`\`\`json
{"entities": ${JSON.stringify(i)}}
\`\`\``;return d>0&&(k+=`

Then call mcp__memory__create_relations with:
\`\`\`json
{"relations": ${JSON.stringify(l)}}
\`\`\``),{continue:!0,systemMessage:k}}case"mcp__memory__create_entities":return u("memory-bridge","mcp__memory__create_entities - graph is primary, no sync needed"),a();default:return a()}}import{existsSync as $t,readFileSync as Et,writeFileSync as Ct,mkdirSync as Ze}from"node:fs";var Ke=/decided|chose|architecture|security|blocked|breaking|critical|must|cannot|deprecated|removed|migration/i,Xe=/pattern|convention|preference|style|format|naming/i,Ve=30,Ye=85,Qe=90;function tn(){let t=parseInt(process.env.CLAUDE_CONTEXT_USED_PERCENTAGE||"0",10);if(t===0){let n=parseInt(process.env.CLAUDE_CONTEXT_TOKENS_USED||"0",10),e=parseInt(process.env.CLAUDE_CONTEXT_MAX_TOKENS||"0",10);if(e>0)return Math.floor(n*100/e)}return t}function en(t){return Ke.test(t)?"IMMEDIATE":Xe.test(t)?"BATCHED":"SESSION_END"}function _t(t){let n=[/[^.]*\b(decided|chose|selected|will use|must|cannot|blocked|breaking)[^.]*/i,/[^.]*\b(architecture|security|migration|deprecated)[^.]*/i];for(let s of n){let r=t.match(s);if(r)return r[0].trim().substring(0,300)}let e=t.match(/^[^.]{30,200}\./);return e?e[0].trim():t.substring(0,300).trim()}function bt(t){let n=t.toLowerCase();return/security|auth|jwt|oauth|cors|xss/.test(n)?"security":/architecture|design|structure|system/.test(n)?"architecture":/database|schema|migration|postgres|sql/.test(n)?"database":/blocked|issue|bug|problem|cannot/.test(n)?"blocker":/breaking|deprecated|removed|migration/.test(n)?"breaking-change":/api|endpoint|route|rest/.test(n)?"api":/decided|chose|selected/.test(n)?"decision":"general"}function nn(t){if(!$t(t))try{Ze(x("path").dirname(t),{recursive:!0}),Ct(t,JSON.stringify({pending:[],created_at:new Date().toISOString()}))}catch{}}function sn(t,n,e){nn(e);try{let s=JSON.parse(Et(e,"utf8"));s.pending.push({content:t,category:n,queued_at:new Date().toISOString()}),Ct(e,JSON.stringify(s,null,2)),u("realtime-sync",`Added to pending queue: category=${n}, length=${t.length}`)}catch{}}function xt(t){if(!$t(t))return 0;try{return JSON.parse(Et(t,"utf8")).pending?.length||0}catch{return 0}}function M(t){let n=t.tool_name||"";if(!["Bash","Write","Edit","Skill","Task"].includes(n))return a();let e="";switch(n){case"Bash":{e=String(g(t,"tool_output")||t.tool_output||"");let l=g(t,"tool_input.command")||"";l&&(e=`${l}
${e}`);break}case"Write":case"Edit":{let l=g(t,"tool_input.new_string")||g(t,"tool_input.content")||"",d=g(t,"tool_input.file_path")||"";e=d?`Writing to ${d}: ${l}`:l;break}case"Skill":case"Task":{e=String(g(t,"tool_result")||t.tool_output||"");break}}if(!e||e.length<Ve)return a();let s=en(e);u("realtime-sync",`Tool: ${n}, Priority: ${s}, Content length: ${e.length}`);let r=tn(),o=p(),i=f(),c=`${o}/.claude/logs/.mem0-pending-sync-${i}.json`;if(s==="BATCHED"&&r>=Ye&&(s="IMMEDIATE",u("realtime-sync",`EMERGENCY: Context at ${r}%, upgrading BATCHED to IMMEDIATE`)),r>=Qe){let l=xt(c);if(l>0)return u("realtime-sync",`CRITICAL: Context at ${r}%, flushing ${l} pending items`),{continue:!0,systemMessage:`[CRITICAL SYNC] Context at ${r}% - compaction imminent!

${l} items in pending queue need immediate sync to knowledge graph.
Pending sync file: ${c}

Execute mcp__memory__create_entities for each item in the pending file NOW
to preserve session context in the knowledge graph before compaction.`}}switch(s){case"IMMEDIATE":{let l=_t(e);if(!l||l.length<20)return u("realtime-sync","Could not extract meaningful decision"),a();let d=bt(l);return u("realtime-sync",`IMMEDIATE sync triggered: category=${d}`),{continue:!0,systemMessage:`[IMMEDIATE SYNC] Critical decision detected - store in knowledge graph now.

Category: ${d}
Decision: "${l.substring(0,200)}"

Store in knowledge graph with mcp__memory__create_entities:
\`\`\`json
{
  "entities": [{
    "name": "${d}-decision",
    "entityType": "Decision",
    "observations": ["${l.substring(0,300).replace(/"/g,'\\"')}"]
  }]
}
\`\`\`

This decision is critical and should be synced immediately for:
- Session continuity if interrupted
- Cross-agent knowledge sharing
- Future reference in similar contexts`}}case"BATCHED":{let l=_t(e);if(l&&l.length>=20){let d=bt(l);sn(l,d,c);let h=xt(c);if(h>=5)return u("realtime-sync",`BATCHED queue has ${h} items - triggering batch sync`),{continue:!0,systemMessage:`[BATCHED SYNC] ${h} patterns/conventions queued for graph sync.

Latest: "${l.substring(0,100)}..." (${d})

These will be synced to knowledge graph at session end, or trigger batch sync now with mcp__memory__create_entities for each item in:
${c}`}}return a()}default:return a()}}import{existsSync as rn,readFileSync as on,writeFileSync as an}from"node:fs";var L="/tmp/claude-session-metrics.json",co=`${L}.lock`;function F(t){let n=t.tool_name||"";if(!n)return a();try{let e={tools:{},errors:0,warnings:0};if(rn(L))try{let r=on(L,"utf8").trim();r&&(e=JSON.parse(r))}catch{e={tools:{},errors:0,warnings:0}}e.tools||(e.tools={});let s=e.tools[n]||0;e.tools[n]=s+1,an(L,JSON.stringify(e,null,2))}catch(e){u("session-metrics",`Error updating metrics: ${e}`)}return a()}import{existsSync as cn,readFileSync as un,appendFileSync as ln,mkdirSync as dn}from"node:fs";var pn=[{name:"add_pagination",regex:/limit.*offset|page.*size|cursor.*pagination|paginate|Paginated/i},{name:"add_rate_limiting",regex:/rate.?limit|throttl|RateLimiter|requests.?per/i},{name:"add_caching",regex:/@cache|cache_key|TTL|redis|memcache|@cached/i},{name:"add_retry_logic",regex:/retry|backoff|max_attempts|tenacity|Retry/i},{name:"add_error_handling",regex:/try.*catch|except|raise.*Exception|throw.*Error|error.*handler/i},{name:"add_validation",regex:/validate|Validator|@validate|Pydantic|Zod|yup|schema/i},{name:"add_logging",regex:/logger[.]|logging[.]|console[.]log|winston|pino|structlog/i},{name:"add_types",regex:/: *(str|int|bool|List|Dict|Optional)|interface |type .*=/i},{name:"add_type_guards",regex:/isinstance|typeof|is.*Type|assert.*type/i},{name:"add_docstring",regex:/docstring|"""[^"]+"""|\/\*\*/i},{name:"remove_comments",regex:/^-.*#|^-.*\/\/|^-.*\*/m},{name:"add_auth_check",regex:/@auth|@require_auth|isAuthenticated|requiresAuth|@login_required/i},{name:"add_input_sanitization",regex:/escape|sanitize|htmlspecialchars|DOMPurify/i},{name:"add_test_case",regex:/def test_|it\(|describe\(|expect\(|assert|@pytest/i},{name:"add_mock",regex:/Mock|patch|jest[.]mock|vi[.]mock|MagicMock/i},{name:"modify_imports",regex:/^[+-].*import|^[+-].*from.*import|^[+-].*require\(/m},{name:"add_async",regex:/async |await |Promise|asyncio|async def/i}];function gn(t){if(!cn(t))return"";try{let n=JSON.parse(un(t,"utf8")),s=Math.floor(Date.now()/1e3)-300;return(n.recentSkills||[]).filter(o=>o.timestamp>s).sort((o,i)=>i.timestamp-o.timestamp)[0]?.skillId||""}catch{return""}}function mn(t){let n=[];for(let{name:e,regex:s}of pn)s.test(t)&&n.push(e);return n}function fn(t,n,e,s){let r=f(),i={timestamp:new Date().toISOString(),skill_id:t,file_path:n,session_id:r,patterns:e};try{dn(x("path").dirname(s),{recursive:!0}),ln(s,JSON.stringify(i)+`
`)}catch{}}function U(t){let n=t.tool_name||"";if(n!=="Write"&&n!=="Edit")return a();let e=g(t,"tool_input.file_path")||"";if(!e)return a();let s=p(),r=`${s}/.claude/session/state.json`,o=gn(r);if(!o)return a();let i="";if(n==="Edit"){let l=g(t,"tool_input.old_string")||"",d=g(t,"tool_input.new_string")||"";if(l&&d){let h=l.split(`
`),k=d.split(`
`);i=h.map(y=>`-${y}`).join(`
`)+`
`+k.map(y=>`+${y}`).join(`
`)}}else i=g(t,"tool_input.content")||"";if(!i)return a();let c=mn(i);if(c.length>0){let l=`${s}/.claude/feedback/edit-patterns.jsonl`;fn(o,e,c,l),process.env.CLAUDE_HOOK_DEBUG&&u("skill-edit-tracker",`Detected ${c.length} patterns for ${o}: ${JSON.stringify(c)}`)}return a()}import{existsSync as Rt,readFileSync as hn,writeFileSync as yn,mkdirSync as kn}from"node:fs";import{createHash as Sn}from"node:crypto";var vt=500;var It=15,wt=3;function Tt(){return`${p()}/.claude/feedback/calibration-data.json`}function _n(){let t=`${p()}/.claude/feedback`;if(!Rt(t))try{kn(t,{recursive:!0})}catch{}}function bn(){let t=Tt();if(Rt(t))try{return JSON.parse(hn(t,"utf8"))}catch{u("calibration-engine","Failed to load calibration data, using defaults")}return{schemaVersion:"1.0.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),records:[],adjustments:[],stats:{totalDispatches:0,successRate:0,avgConfidence:0,topAgents:[]}}}function xn(t){_n();let n=Tt();t.updatedAt=new Date().toISOString();try{yn(n,JSON.stringify(t,null,2)),u("calibration-engine","Saved calibration data")}catch(e){u("calibration-engine",`Failed to save calibration data: ${e}`)}}function $n(t){return Sn("sha256").update(t.toLowerCase().trim()).digest("hex").slice(0,16)}function At(t,n,e,s,r,o,i){let c=bn(),l={timestamp:new Date().toISOString(),sessionId:f(),agent:n,promptHash:$n(t),matchedKeywords:e,dispatchConfidence:s,outcome:r,durationMs:o,feedback:i};c.records.push(l),c.records.length>vt&&(c.records=c.records.slice(-vt)),En(c,l),Cn(c),xn(c),u("calibration-engine",`Recorded outcome: ${n} -> ${r} (conf: ${s})`)}function En(t,n){let e=n.outcome==="success",s=n.outcome==="failure"||n.outcome==="rejected";if(!e&&!s)return;let r=e?wt:-wt;for(let o of n.matchedKeywords){let i=t.adjustments.find(c=>c.keyword===o&&c.agent===n.agent);i?(i.adjustment=Math.max(-It,Math.min(It,i.adjustment+r)),i.sampleCount++,i.lastUpdated=new Date().toISOString()):t.adjustments.push({keyword:o,agent:n.agent,adjustment:r,sampleCount:1,lastUpdated:new Date().toISOString()})}}function Cn(t){let n=t.records;if(n.length===0)return;t.stats.totalDispatches=n.length;let e=n.filter(o=>o.outcome==="success").length;t.stats.successRate=e/n.length;let s=n.reduce((o,i)=>o+i.dispatchConfidence,0)/n.length;t.stats.avgConfidence=Math.round(s);let r=new Map;for(let o of n){let i=r.get(o.agent)||{count:0,success:0};i.count++,o.outcome==="success"&&i.success++,r.set(o.agent,i)}t.stats.topAgents=Array.from(r.entries()).map(([o,i])=>({agent:o,count:i.count,successRate:i.success/i.count})).sort((o,i)=>i.count-o.count).slice(0,10)}import{existsSync as vn,readFileSync as In,writeFileSync as So,mkdirSync as _o}from"node:fs";function wn(){let t=f();return`${p()}/.claude/orchestration/task-registry-${t}.json`}function Rn(){let t=wn();if(vn(t))try{return JSON.parse(In(t,"utf8"))}catch{}return{schemaVersion:"1.0.0",sessionId:f(),tasks:[],pipelines:[],updatedAt:new Date().toISOString()}}function Dt(t){return Rn().tasks.find(e=>e.taskId===t)}import{existsSync as Ht,readFileSync as jt,writeFileSync as Eo,mkdirSync as Co}from"node:fs";function Tn(){return`${p()}/.claude/orchestration`}function An(){let t=f();return`${Tn()}/session-${t}.json`}function Dn(){return`${p()}/.claude/orchestration/config.json`}function On(){let t=An();if(Ht(t))try{let n=jt(t,"utf8");return JSON.parse(n)}catch(n){u("orchestration-state",`Failed to load state: ${n}`)}return{sessionId:f(),activeAgents:[],injectedSkills:[],promptHistory:[],maxHistorySize:10,updatedAt:new Date().toISOString()}}function Nt(){return On().lastClassification}var Ot={enableAutoDispatch:!0,enableSkillInjection:!0,maxSkillInjectionTokens:800,enableCalibration:!0,enablePipelines:!0,maxRetries:3,retryDelayBaseMs:1e3};function Pt(){let t=Dn();if(Ht(t))try{let n=jt(t,"utf8");return{...Ot,...JSON.parse(n)}}catch{}return Ot}function Hn(t){let n=t.tool_input||{};return typeof n.taskId=="string"?n.taskId:null}function jn(t){return t.tool_name!=="TaskUpdate"?!1:typeof(t.tool_input||{}).status=="string"}function Nn(t){switch(t){case"completed":return"success";case"pending":return null;default:return null}}function B(t){if(!jn(t))return a();if(!Pt().enableCalibration)return a();let e=t.tool_input||{},s=Hn(t),r=e.status;if(!s)return a();let o=Nn(r);if(!o)return a();u("calibration-tracker",`Tracking task ${s} status update to ${r}`);let i=Dt(s);if(!i)return u("calibration-tracker",`Task ${s} not found in registry`),a();let c=i.agent;if(!c)return u("calibration-tracker",`No agent associated with task ${s}`),a();let d=Nt()?.agents.find(C=>C.agent===c),h=d?.matchedKeywords||[],k=i.confidence||d?.confidence||0,y=i.createdAt?Date.now()-new Date(i.createdAt).getTime():void 0;return At("",c,h,k,o,y),u("calibration-tracker",`Recorded calibration: ${c} -> ${o} (conf: ${k})`),a()}import{existsSync as Pn,readFileSync as Mn,writeFileSync as Mt,mkdirSync as Ln}from"node:fs";var Fn={JWT:/jwt|jsonwebtoken/i,OAuth2:/oauth|oauth2/i,PostgreSQL:/postgres|postgresql|psql/i,Redis:/redis/i,React:/react/i,FastAPI:/fastapi/i,SQLAlchemy:/sqlalchemy/i,Alembic:/alembic/i,"cursor-pagination":/cursor.based|keyset/i,"offset-pagination":/offset.pagination/i,WebSocket:/websocket/i,SSE:/sse|server.sent/i,GraphQL:/graphql/i,REST:/rest.api|restful/i},Un={feature:/^feat:|^feature:/i,bugfix:/^fix:|^bugfix:/i,refactor:/^refactor:/i,optimization:/^perf:|^performance:/i,security:/^security:|^sec:/i,testing:/^test:|^tests:/i},Bn={pagination:/cursor|pagination|offset|limit|page/i,caching:/cache|redis|memcache|ttl/i,authentication:/auth|jwt|oauth|token|login/i,validation:/validate|validation|schema|pydantic|zod/i,testing:/test|spec|coverage|mock/i,security:/security|encrypt|hash|secret|credential/i,performance:/performance|optimize|cache|index/i,error_handling:/error|exception|retry|fallback/i};function zn(){return p().split("/").pop()||"unknown"}function Wn(t){let n=t.toLowerCase(),e="unknown",s="general";for(let[r,o]of Object.entries(Fn))if(o.test(n)){e=r;break}for(let[r,o]of Object.entries(Un))if(o.test(t)){s=r;break}return{tech:e,pattern:s}}function Jn(t){for(let[n,e]of Object.entries(Bn))if(e.test(t))return n;return"general"}function z(t,n,e,s,r){let o=new Date().toISOString(),i=zn();if(!Pn(r))try{Ln(x("path").dirname(r),{recursive:!0}),Mt(r,JSON.stringify({patterns:[]}))}catch{return}try{let c=JSON.parse(Mn(r,"utf8"));c.patterns.push({text:t,category:n,outcome:e,source:s,timestamp:o,project:i}),Mt(r,JSON.stringify(c,null,2)),u("pattern-extractor",`Queued pattern: category=${n} outcome=${e} source=${s}`)}catch{}}function qn(t,n,e){let s="",r=t.match(/-m\s+["']([^"']+)["']/)||t.match(/-m\s+([^\s]+)/);if(r&&(s=r[1]),!s)return;let{tech:o,pattern:i}=Wn(s),c=Jn(s),l=n===0?"success":"failed",d=s;o!=="unknown"&&(d=`[${o}] ${s}`),z(d,c,l,"commit",e)}function Gn(t,n,e){if(n!==0)return;let s="PR merged successfully",r=t.match(/gh\s+pr\s+merge\s+(\d+)/);r&&(s=`PR #${r[1]} merged`),z(s,"decision","success","pr-merge",e)}function Zn(t,n,e){let s="unknown";/pytest|py\.test/.test(t)?s="pytest":/jest/.test(t)?s="jest":/vitest/.test(t)?s="vitest":/npm\s+test|yarn\s+test|bun\s+test/.test(t)?s="npm-test":/go\s+test/.test(t)&&(s="go-test");let r=n===0?"success":"failed",o=`Tests ${r==="success"?"passed":"failed"} (${s})`;z(o,"testing",r,"test-run",e)}function Kn(t,n,e){let s="unknown";/npm\s+run\s+build/.test(t)?s="npm":/yarn\s+build/.test(t)?s="yarn":/cargo\s+build/.test(t)?s="cargo":/make/.test(t)?s="make":/docker\s+build/.test(t)&&(s="docker");let r=n===0?"success":"failed",o=`Build ${r==="success"?"succeeded":"failed"} (${s})`;z(o,"build",r,"build",e)}function W(t){if((t.tool_name||"")!=="Bash")return a();let e=g(t,"tool_input.command")||"",s=t.exit_code??0;if(!e)return a();let r=e.toLowerCase(),i=`${p()}/.claude/feedback/patterns-queue.json`;return/git\s+commit/.test(r)?qn(e,s,i):/gh\s+pr\s+merge/.test(r)?Gn(e,s,i):/pytest|jest|vitest|npm\s+test|yarn\s+test|bun\s+test|go\s+test/.test(r)?Zn(e,s,i):/npm\s+run\s+build|yarn\s+build|cargo\s+build|make|docker\s+build/.test(r)&&Kn(e,s,i),a()}import{existsSync as Ft,readFileSync as Ut,writeFileSync as Xn,mkdirSync as Vn}from"node:fs";var Yn=["py","ts","tsx","js","jsx","go","rs","java"];function Qn(t){switch(t.split(".").pop()?.toLowerCase()){case"py":return"python";case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"go":return"go";case"rs":return"rust";case"java":return"java";default:return null}}function ts(t){let n=0,e=0,s=0;for(let r of t.split(`
`))r.startsWith("	")?n++:r.startsWith("    ")?s++:r.match(/^  [^ ]/)&&e++;return n>e+s?{style:"tabs",size:1}:e>s?{style:"spaces",size:2}:s>0?{style:"spaces",size:4}:{style:"unknown",size:4}}function es(t){let n=(t.match(/'/g)||[]).length,e=(t.match(/"/g)||[]).length;return n>e?"single":"double"}function ns(t){let n=0,e=0;for(let s of t.split(`
`)){let r=s.trim();!r||r.startsWith("//")||r.startsWith("*")||(/;\s*$/.test(s)?n++:/[a-zA-Z0-9\)\]\'\"]\\s*$/.test(s)&&e++)}return n>e?"always":"omit"}function Lt(t){return(t.match(/,\s*$/gm)||[]).length>5?"always":"minimal"}function ss(t){let n=/\) -> |: [A-Z][a-zA-Z]+(\[|$| =)/.test(t),e="unknown";return/"""[^"]+"""/.test(t)&&(/:param |:returns:|:raises:/.test(t)?e="sphinx":/Args:|Returns:|Raises:/.test(t)?e="google":/Parameters|Returns\n-+/.test(t)?e="numpy":e="simple"),{typeHints:n,docstringStyle:e}}function rs(t){if(Ft(t))try{return JSON.parse(Ut(t,"utf8"))}catch{}return{version:"1.0.0",last_updated:null,samples_count:0,languages:{},global_preferences:{indentation:{style:"unknown",size:4,confidence:0},quotes:{style:"unknown",confidence:0}}}}function os(t,n,e,s,r,o,i,c){t.last_updated=new Date().toISOString(),t.samples_count++,t.languages[n]||(t.languages[n]={samples:0,indentation:{tabs:0,spaces_2:0,spaces_4:0},quotes:{single:0,double:0},semicolons:{always:0,omit:0},trailing_comma:{always:0,minimal:0},type_hints:{used:0,not_used:0},docstring_style:{}});let l=t.languages[n];l.samples++,e.style==="tabs"?l.indentation.tabs++:e.size===2?l.indentation.spaces_2++:l.indentation.spaces_4++,s==="single"?l.quotes.single++:l.quotes.double++,r!=="unknown"&&(r==="always"?l.semicolons.always++:l.semicolons.omit++),o!=="unknown"&&(o==="always"?l.trailing_comma.always++:l.trailing_comma.minimal++),i!==null&&(i?l.type_hints.used++:l.type_hints.not_used++),c!=="unknown"&&(l.docstring_style[c]=(l.docstring_style[c]||0)+1)}function J(t){let n=t.tool_name||"";if(n!=="Write"&&n!=="Edit")return a();let e=g(t,"tool_input.file_path")||"";if(!e||e.includes("/.claude/")||e.includes("/node_modules/")||e.includes("/.git/")||e.includes("/dist/")||e.endsWith(".lock"))return a();let s=e.split(".").pop()?.toLowerCase()||"";if(!Yn.includes(s))return a();let r=Qn(e);if(!r)return a();let o=g(t,"tool_input.content")||"";if(!o){let m=p(),S=e.startsWith("/")?e:`${m}/${e}`;if(Ft(S))try{o=Ut(S,"utf8").split(`
`).slice(0,100).join(`
`)}catch{return a()}}if(!o)return a();let i=ts(o),c=es(o),l="unknown",d="unknown",h=null,k="unknown";switch(r){case"javascript":case"typescript":l=ns(o),d=Lt(o);break;case"python":{let m=ss(o);h=m.typeHints,k=m.docstringStyle,d=Lt(o);break}}let y=p(),C=`${y}/.claude/feedback/code-style-profile.json`;try{Vn(`${y}/.claude/feedback`,{recursive:!0});let m=rs(C);os(m,r,i,c,l,d,h,k),Xn(C,JSON.stringify(m,null,2))}catch(m){u("code-style-learner",`Error updating profile: ${m}`)}return u("code-style-learner",`Analyzed ${r} file: indent=${i.style}(${i.size}) quotes=${c}`),a()}import{existsSync as Bt,readFileSync as zt,writeFileSync as is,mkdirSync as as}from"node:fs";var cs=["py","ts","tsx","js","jsx","go","rs","java"];function us(t){return t.length<2||/^[_0-9]+$/.test(t)?"unknown":/^[A-Z][A-Z0-9_]*$/.test(t)?"SCREAMING_SNAKE_CASE":/^[A-Z][a-zA-Z0-9]*$/.test(t)?"PascalCase":/^[a-z][a-zA-Z0-9]*$/.test(t)&&!t.includes("_")?"camelCase":/^[a-z][a-z0-9_]*$/.test(t)?"snake_case":/^_[a-z][a-z0-9_]*$/.test(t)?"private_snake_case":/^__[a-z][a-z0-9_]*__$/.test(t)?"dunder":"mixed"}function ls(t){let n=(t.match(/def ([a-zA-Z_][a-zA-Z0-9_]*)/g)||[]).map(o=>o.replace("def ","")),e=(t.match(/class ([A-Za-z_][a-zA-Z0-9_]*)/g)||[]).map(o=>o.replace("class ","")),s=(t.match(/^\s*([a-zA-Z_][a-zA-Z0-9_]*)\s*=/gm)||[]).map(o=>o.replace(/\s*=.*/,"").trim()),r=(t.match(/^([A-Z][A-Z0-9_]*)\s*=/gm)||[]).map(o=>o.replace(/\s*=.*/,"").trim());return{functions:n,classes:e,variables:s,constants:r}}function ds(t){let n=[...(t.match(/(function|async function) ([a-zA-Z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace(/(async )?function /,"")),...(t.match(/const ([a-zA-Z_][a-zA-Z0-9_]*)\s*=\s*\(/g)||[]).map(i=>i.replace(/const /,"").replace(/\s*=.*/,""))],e=(t.match(/class ([A-Za-z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace("class ","")),s=(t.match(/interface ([A-Za-z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace("interface ","")),r=(t.match(/type ([A-Za-z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace("type ","")),o=(t.match(/(const|let|var) ([a-zA-Z_][a-zA-Z0-9_]*)/g)||[]).map(i=>i.replace(/(const|let|var) /,""));return{functions:n,classes:e,variables:o,interfaces:s,types:r}}function b(t){let n={camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0};for(let e of t){if(!e)continue;let s=us(e);n[s]++}return n}function ps(t){let e=(t.split("/").pop()||"").replace(/\.[^.]+$/,"");return/^[a-z][a-z0-9_]*$/.test(e)?"snake_case":/^[a-z][a-z0-9-]*$/.test(e)?"kebab-case":/^[A-Z][a-zA-Z0-9]*$/.test(e)?"PascalCase":/^[a-z][a-zA-Z0-9]*$/.test(e)?"camelCase":"mixed"}function gs(t){switch(t.split(".").pop()?.toLowerCase()){case"py":return"python";case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"go":return"go";case"rs":return"rust";case"java":return"java";default:return null}}function ms(t){if(Bt(t))try{return JSON.parse(zt(t,"utf8"))}catch{}return{version:"1.0.0",last_updated:null,samples_count:0,languages:{},file_naming:{},detected_patterns:{functions:{},classes:{},variables:{},constants:{},types:{}}}}function fs(){return{samples:0,functions:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0},classes:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0},variables:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0},constants:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0},types:{camelCase:0,snake_case:0,PascalCase:0,SCREAMING_SNAKE_CASE:0,private_snake_case:0,dunder:0,mixed:0,unknown:0}}}function q(t){let n=t.tool_name||"";if(n!=="Write"&&n!=="Edit")return a();let e=g(t,"tool_input.file_path")||"";if(!e||e.includes("/.claude/")||e.includes("/node_modules/")||e.includes("/.git/")||e.includes("/dist/")||e.endsWith(".lock"))return a();let s=e.split(".").pop()?.toLowerCase()||"";if(!cs.includes(s))return a();let r=gs(e);if(!r)return a();let o=g(t,"tool_input.content")||"";if(!o){let m=p(),S=e.startsWith("/")?e:`${m}/${e}`;if(Bt(S))try{o=zt(S,"utf8").split(`
`).slice(0,150).join(`
`)}catch{return a()}}if(!o)return a();let i=ps(e),c=b([]),l=b([]),d=b([]),h=b([]),k=b([]);switch(r){case"python":{let m=ls(o);c=b(m.functions),l=b(m.classes),d=b(m.variables),h=b(m.constants);break}case"typescript":case"javascript":{let m=ds(o);c=b(m.functions),l=b(m.classes),d=b(m.variables),k=b([...m.interfaces,...m.types]);break}}let y=p(),C=`${y}/.claude/feedback/naming-conventions.json`;try{as(`${y}/.claude/feedback`,{recursive:!0});let m=ms(C);m.last_updated=new Date().toISOString(),m.samples_count++,m.file_naming[i]=(m.file_naming[i]||0)+1,m.languages[r]||(m.languages[r]=fs());let S=m.languages[r];S.samples++;for(let _ of Object.keys(c))S.functions[_]=(S.functions[_]||0)+c[_],S.classes[_]=(S.classes[_]||0)+l[_],S.variables[_]=(S.variables[_]||0)+d[_],S.constants[_]=(S.constants[_]||0)+h[_],S.types[_]=(S.types[_]||0)+k[_];is(C,JSON.stringify(m,null,2))}catch(m){u("naming-convention-learner",`Error updating profile: ${m}`)}return u("naming-convention-learner",`Analyzed ${r} file (${e}): file=${i}`),a()}import{existsSync as hs,readFileSync as ys,writeFileSync as Wt,mkdirSync as ks}from"node:fs";var Ss={"api-design-framework|fastapi-advanced":"Both relate to API design. Consider using api-design-framework for patterns, fastapi-advanced for implementation.","sqlalchemy-2-async|database-schema-designer":"Both relate to database. Use database-schema-designer for schema design, sqlalchemy-2-async for async patterns.","caching-strategies|performance-optimization":"Both optimize performance. Consider consolidating caching queries.","auth-patterns|owasp-top-10":"Both relate to security. auth-patterns for implementation, owasp-top-10 for validation.","asyncio-advanced|connection-pooling":"Both relate to async. asyncio-advanced for patterns, connection-pooling for specific optimization."};function _s(t){if(!hs(t))try{ks(x("path").dirname(t),{recursive:!0}),Wt(t,JSON.stringify({version:"1.0",skills:{},sessions:{},last_updated:""}))}catch{}}function G(t){_s(t);try{return JSON.parse(ys(t,"utf8"))}catch{return{version:"1.0",skills:{},sessions:{},last_updated:""}}}function bs(t,n,e){let s=G(e),r=new Date().toISOString();s.skills[t]=(s.skills[t]||0)+1,s.sessions[n]||(s.sessions[n]=[]),s.sessions[n].includes(t)||s.sessions[n].push(t),s.last_updated=r;try{Wt(e,JSON.stringify(s,null,2)),u("skill-usage-optimizer",`Updated usage for skill: ${t} (session: ${n})`)}catch{}}function xs(t,n){return G(n).sessions[t]||[]}function $s(t,n){for(let[e,s]of Object.entries(Ss)){let[r,o]=e.split("|");if(t===r||t===o){let i=t===r?o:r;if(n.includes(i))return u("skill-usage-optimizer",`Overlap detected: ${r} + ${o}`),s}}return null}function Es(t){let n=G(t),e=Object.entries(n.skills);return e.length===0?"":e.sort((s,r)=>r[1]-s[1]).slice(0,3).map(([s,r])=>`${s}:${r}`).join(", ")}function Z(t){let n=t.tool_name||"",e=g(t,"tool_input.skill")||g(t,"tool_name")||"";if(n!=="Skill"&&!e?.startsWith("skills/")&&!e)return a();if(!e)return a();let r=`${p()}/.claude/feedback/skill-usage.json`,o=f();bs(e,o,r);let i=xs(o,r),c=$s(e,i),l=Es(r),d="";c&&(d=`Skill overlap: ${c}`,u("skill-usage-optimizer",`Suggesting consolidation for: ${e}`));let k=G(r).skills[e]||0;return k>0&&k%5===0&&l&&(d?d=`${d} | Top skills: ${l}`:d=`Top skills this project: ${l}`),d?(d.length>200&&(d=d.substring(0,197)+"..."),{continue:!0,hookSpecificOutput:{additionalContext:d}}):a()}import{existsSync as Cs,readFileSync as vs,writeFileSync as Jt,mkdirSync as Is}from"node:fs";import{execSync as $}from"node:child_process";function ws(t){let n=t.match(/^(issue|fix|feature|bug|feat)\/(\d+)/);return n?n[2]:(n=t.match(/^(\d+)-/),n?n[1]:null)}function Rs(t){let n=t.match(/#(\d+)/);return n?n[1]:(n=t.match(/(fix|fixes|close|closes|resolve|resolves)\s+#?(\d+)/i),n?n[2]:null)}function Ts(){try{return $("git branch --show-current 2>/dev/null || git rev-parse --abbrev-ref HEAD 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim()}catch{return""}}function As(){try{let t=$("git rev-parse --short HEAD 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim(),n=$("git log -1 --pretty=%s 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim(),e=$("git log -1 --pretty=%cI 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim()||new Date().toISOString();return{sha:t,message:n,timestamp:e}}catch{return null}}function Ds(t,n){if(!Cs(t))try{Is(x("path").dirname(t),{recursive:!0}),Jt(t,JSON.stringify({session_id:n,issues:{}}))}catch{}}function Os(t,n,e,s,r){Ds(s,r);try{let o=JSON.parse(vs(s,"utf8"));return o.issues[t]||(o.issues[t]={commits:[],tasks_completed:[],pr_url:null,branch:e}),o.issues[t].commits.push(n),o.issues[t].branch=e,Jt(s,JSON.stringify(o,null,2)),u("issue-progress-commenter",`Queued commit for issue #${t}`),!0}catch{return u("issue-progress-commenter",`Error queuing commit for issue #${t}`),!1}}function K(t){if((t.tool_name||"")!=="Bash")return a();let e=g(t,"tool_input.command")||"",s=t.exit_code??0;if(!/git\s+commit/i.test(e)||s!==0)return a();u("issue-progress-commenter","Processing git commit command...");try{$("which gh",{stdio:"ignore",timeout:2e3})}catch{return u("issue-progress-commenter","gh CLI not available, skipping issue progress tracking"),a()}try{if(!$("git remote get-url origin 2>/dev/null",{encoding:"utf8",timeout:5e3}).includes("github"))return u("issue-progress-commenter","Not a GitHub repository, skipping"),a()}catch{return a()}let r=Ts();if(!r)return u("issue-progress-commenter","Could not determine current branch"),a();let o=ws(r);if(!o)try{let d=$("git log -1 --pretty=%s 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim();o=Rs(d)}catch{}if(!o)return u("issue-progress-commenter",`No issue number found in branch '${r}' or commit message`),a();u("issue-progress-commenter",`Found issue #${o}`);try{$(`gh issue view ${o} --json number`,{stdio:"ignore",timeout:5e3})}catch{return u("issue-progress-commenter",`Issue #${o} not found or not accessible`),a()}let i=As();if(!i)return u("issue-progress-commenter","Could not get commit info"),a();let c=(t.session_id||f()).replace(/[^a-zA-Z0-9_-]/g,""),l=`/tmp/claude-session-${c}/issue-progress.json`;return Os(o,i,r,l,c),a()}import{existsSync as Hs,readFileSync as js,writeFileSync as Ns}from"node:fs";import{execSync as E}from"node:child_process";function Ps(t){let n=t.replace(/^[a-z]+(\([^)]*\))?:\s*/i,"");return n=n.replace(/\(#\d+\)/g,""),n.trim()}function qt(t){return t.toLowerCase().replace(/\s+/g," ").trim()}function Ms(t,n){let e=qt(t),s=qt(n);if(e===s||e.includes(s)||s.includes(e))return!0;let r=new Set(e.split(" ").filter(c=>c.length>=3)),o=s.split(" ").filter(c=>c.length>=3),i=0;for(let c of o)r.has(c)&&i++;return i>=2}function Ls(t){let n=t.match(/^(issue|fix|feature|bug|feat)\/(\d+)/);return n?n[2]:(n=t.match(/^(\d+)-/),n?n[1]:null)}function Fs(t){let n=t.match(/#(\d+)/);return n?n[1]:null}function Us(t){try{let e=E(`gh issue view ${t} --json body -q '.body' 2>/dev/null`,{encoding:"utf8",timeout:1e4}).split(`
`),s=[];for(let r of e){let o=r.match(/^\s*-\s*\[\s*\]\s+(.+)/);o&&s.push(o[1].trim())}return s}catch{return[]}}function Bs(t,n){u("issue-subtask-updater",`Attempting to update checkbox: '${n}' in issue #${t}`);try{let e=E(`gh issue view ${t} --json body -q '.body' 2>/dev/null`,{encoding:"utf8",timeout:1e4}),s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=e.replace(new RegExp(`(^\\s*-\\s*)\\[\\s*\\](\\s+${s})`,"m"),"$1[x]$2");if(e===r)return u("issue-subtask-updater",`No change needed for checkbox: '${n}'`),!1;let o=E("gh repo view --json nameWithOwner -q '.nameWithOwner' 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim(),i=JSON.stringify(r);return E(`gh api -X PATCH "repos/${o}/issues/${t}" -f body=${i}`,{stdio:"ignore",timeout:1e4}),u("issue-subtask-updater",`Successfully updated checkbox: '${n}'`),!0}catch(e){return u("issue-subtask-updater",`Failed to update issue body: ${e}`),!1}}function zs(t,n,e){if(Hs(e))try{let s=JSON.parse(js(e,"utf8"));s.issues[t]||(s.issues[t]={commits:[],tasks_completed:[],pr_url:null}),s.issues[t].tasks_completed.includes(n)||(s.issues[t].tasks_completed.push(n),Ns(e,JSON.stringify(s,null,2)))}catch{}}function X(t){if((t.tool_name||"")!=="Bash")return a();let e=g(t,"tool_input.command")||"",s=t.exit_code??0;if(!/git\s+commit/i.test(e)||s!==0)return a();u("issue-subtask-updater","Processing git commit for subtask updates...");try{E("which gh",{stdio:"ignore",timeout:2e3})}catch{return u("issue-subtask-updater","gh CLI not available, skipping subtask updates"),a()}try{if(!E("git remote get-url origin 2>/dev/null",{encoding:"utf8",timeout:5e3}).includes("github"))return u("issue-subtask-updater","Not a GitHub repository, skipping"),a()}catch{return a()}let r="",o="";try{r=E("git branch --show-current 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim(),o=E("git log -1 --pretty=%s 2>/dev/null",{encoding:"utf8",timeout:5e3}).trim()}catch{return a()}let i=Ls(r);if(i||(i=Fs(o)),!i)return u("issue-subtask-updater","No issue number found"),a();u("issue-subtask-updater",`Found issue #${i}, checking for matching subtasks...`);let c=Ps(o);if(!c)return u("issue-subtask-updater","Could not extract task from commit message"),a();u("issue-subtask-updater",`Commit task: '${c}'`);let l=Us(i);if(l.length===0)return u("issue-subtask-updater",`No unchecked tasks in issue #${i}`),a();let d=!1,k=`/tmp/claude-session-${(t.session_id||f()).replace(/[^a-zA-Z0-9_-]/g,"")}/issue-progress.json`;for(let y of l)Ms(c,y)&&(u("issue-subtask-updater",`Found matching checkbox: '${y}'`),Bs(i,y)&&(zs(i,y,k),d=!0));return d?{continue:!0,suppressOutput:!0,hookSpecificOutput:{hookEventName:"PostToolUse",additionalContext:`Issue #${i}: Automatically marked sub-task as complete based on commit.`}}:(u("issue-subtask-updater",`No matching checkboxes found for task: '${c}'`),a())}var Ws=[{name:"session-metrics",fn:F,matcher:"*"},{name:"audit-logger",fn:A,matcher:"*"},{name:"calibration-tracker",fn:B,matcher:"*"},{name:"pattern-extractor",fn:W,matcher:"Bash"},{name:"issue-progress-commenter",fn:K,matcher:"Bash"},{name:"issue-subtask-updater",fn:X,matcher:"Bash"},{name:"mem0-webhook-handler",fn:N,matcher:"Bash"},{name:"code-style-learner",fn:J,matcher:["Write","Edit"]},{name:"naming-convention-learner",fn:q,matcher:["Write","Edit"]},{name:"skill-edit-tracker",fn:U,matcher:["Write","Edit"]},{name:"coordination-heartbeat",fn:j,matcher:"Task"},{name:"skill-usage-optimizer",fn:Z,matcher:"Skill"},{name:"memory-bridge",fn:P,matcher:["mcp__mem0__add_memory","mcp__memory__create_entities"]},{name:"realtime-sync",fn:M,matcher:["Bash","Write","Edit","Skill","Task"]}];function Js(t,n){return n==="*"?!0:Array.isArray(n)?n.includes(t):t===n}async function Gt(t){let n=t.tool_name||"",e=Ws.filter(o=>Js(n,o.matcher));if(e.length===0)return a();let r=(await Promise.allSettled(e.map(async o=>{try{let i=o.fn(t);return i instanceof Promise&&await i,{hook:o.name,status:"success"}}catch(i){let c=i instanceof Error?i.message:String(i);return u("unified-dispatcher",`${o.name} failed: ${c}`),{hook:o.name,status:"error",message:c}}}))).filter(o=>o.status==="rejected"||o.status==="fulfilled"&&o.value.status==="error");return r.length>0&&u("unified-dispatcher",`${r.length}/${e.length} hooks had errors`),a()}import{appendFileSync as Zt,mkdirSync as qs}from"node:fs";import{execSync as Gs}from"node:child_process";function Kt(t){if((t.tool_name||"")!=="Write")return a();let e=g(t,"tool_input.file_path")||process.env.TOOL_OUTPUT_FILE_PATH||"";if(!e)return a();if(e.includes("test")||e.includes("spec")||e.includes("__tests__"))return a();if(!/\.(py|ts|tsx|js|jsx)$/.test(e))return a();let s=p(),r="",o=e.split("/").pop()||"";if(e.endsWith(".py"))r=`test_${o.replace(".py","")}.py`;else if(/\.(ts|tsx|js|jsx)$/.test(e))r=`${o.replace(/\.[^.]+$/,"")}.test.*`;else return a();let i="";try{i=Gs(`find "${s}" -type f -name "${r}" 2>/dev/null | head -1`,{encoding:"utf8",timeout:5e3}).trim()}catch{}let c=`${s}/.claude/hooks/logs`;try{qs(c,{recursive:!0});let l=new Date().toISOString();if(i)Zt(`${c}/coverage-predictor.log`,`[${l}] COVERAGE_OK: ${e} has tests at ${i}
`);else return Zt(`${c}/coverage-predictor.log`,`[${l}] COVERAGE_WARN: ${e} may lack test coverage (expected: ${r})
`),{continue:!0,systemMessage:`Consider adding tests for: ${e}`}}catch{}return a()}import{existsSync as Q,statSync as Zs,appendFileSync as Ks,mkdirSync as Xs}from"node:fs";function Vs(t,n){let e=t.split("/").pop()||"",s=t.split("/").slice(0,-1).join("/"),r=(t.split(".").pop()||"").toLowerCase();switch(e){case"package.json":if(Q(`${n}/${t}`))try{let o=x(`${n}/${t}`);if(Object.keys(o.scripts||{}).length>5)return{changeType:"scripts",readmeSection:"Available Scripts",suggestion:"Update README with new npm scripts"}}catch{}break;case"pyproject.toml":case"setup.py":case"setup.cfg":return{changeType:"python-config",readmeSection:"Installation",suggestion:"Verify README installation instructions match project config"};case"Dockerfile":case"docker-compose.yml":case"docker-compose.yaml":return{changeType:"docker",readmeSection:"Docker / Deployment",suggestion:"Update README Docker instructions"};case".env.example":case".env.template":return{changeType:"env",readmeSection:"Environment Variables",suggestion:"Update README environment variable documentation"}}if(t.includes("/api/")||t.includes("/routes/")||t.includes("/endpoints/"))return{changeType:"api",readmeSection:"API Endpoints",suggestion:"Update README API documentation or OpenAPI spec"};if(s.includes("/config")||s.includes("/settings"))return{changeType:"config",readmeSection:"Configuration",suggestion:"Document new configuration options in README"};if(["index.ts","index.js","main.py","app.py","__init__.py"].includes(e)&&t.split("/").length<=4)return{changeType:"entry-point",readmeSection:"Getting Started",suggestion:"Review README getting started section for accuracy"};if((t.includes("/bin/")||t.includes("/cli/")||t.includes("/scripts/"))&&["sh","py","ts"].includes(r))return{changeType:"cli",readmeSection:"CLI / Commands",suggestion:"Update README CLI usage documentation"};if(e==="index.ts"||e==="index.js"){let o=`${n}/${t}`;if(Q(o))try{let{readFileSync:i}=x("fs");if((i(o,"utf8").match(/^export/gm)||[]).length>5)return{changeType:"exports",readmeSection:"API Reference",suggestion:"Consider updating API reference with new exports"}}catch{}}return null}function Ys(t){for(let n of["README.md","Readme.md","readme.md","README.rst","README"])if(Q(`${t}/${n}`))return`${t}/${n}`;return null}function Xt(t){if((t.tool_name||"")!=="Write")return a();let e=g(t,"tool_input.file_path")||"";if(!e)return a();if(e.includes("/.claude/")||e.includes("/node_modules/")||e.includes("/.git/")||e.includes("/dist/")||e.endsWith(".lock")||e.endsWith(".log"))return a();if(e.includes("test")||e.includes("spec")||e.includes("__tests__"))return a();let s=p(),r=Vs(e,s);if(!r)return a();let o=Ys(s),i;if(o){let l=0;try{let k=Zs(o).mtime.getTime(),y=Date.now();l=Math.floor((y-k)/(86400*1e3))}catch{}let d=r.suggestion;l>30&&(d=`${d} (README last updated ${l}+ days ago)`),i=`README sync: ${r.changeType} change in ${e.split("/").pop()}. Section: '${r.readmeSection}'. ${d}`}else i=`README sync: ${r.changeType} change detected but no README.md found. Consider creating one.`;i.length>200&&(i=`README sync: ${r.changeType} change detected. Consider updating '${r.readmeSection}' section.`);let c=`${s}/.claude/hooks/logs`;try{Xs(c,{recursive:!0});let l=new Date().toISOString();Ks(`${c}/readme-sync.log`,`[${l}] README_SYNC: ${r.changeType} change in ${e} -> ${r.readmeSection}
`)}catch{}return u("readme-sync",`README_SYNC: ${r.changeType} change suggests README update`),{continue:!0,hookSpecificOutput:{additionalContext:i}}}import{existsSync as Qs}from"node:fs";function Vt(t){let e=`${p()}/.claude/coordination/lib/coordination.sh`;return Qs(e)?a():a()}import{existsSync as tt,readFileSync as tr}from"node:fs";import{execSync as Yt}from"node:child_process";function er(){try{Yt("which sqlite3",{stdio:"ignore",timeout:2e3});let n=`${p()}/.claude/coordination/.claude.db`;return tt(n)}catch{return!1}}function nr(t,n){let s=`${p()}/.claude/coordination/.claude.db`;if(!tt(s))return!1;try{let r=t.replace(/'/g,"''"),o=n.replace(/'/g,"''");return Yt(`sqlite3 "${s}" "DELETE FROM file_locks WHERE file_path = '${r}' AND instance_id = '${o}';"`,{stdio:"ignore",timeout:5e3}),u("file-lock-release",`Released lock for ${t}`),!0}catch(r){return u("file-lock-release",`Failed to release lock for ${t}: ${r}`),!1}}function sr(){if(process.env.INSTANCE_ID)return process.env.INSTANCE_ID;let n=`${p()}/.claude/.instance_env`;if(tt(n))try{let s=tr(n,"utf8").match(/CLAUDE_INSTANCE_ID=["']?([^"'\n]+)/);if(s)return s[1]}catch{}return f()}function Qt(t){let n=t.tool_name||"";if(n!=="Write"&&n!=="Edit")return a();if(!er())return a();let e=g(t,"tool_input.file_path")||"";if(!e)return a();if(e.includes("/.claude/coordination/"))return a();let s=String(g(t,"tool_result")||"");if(s.includes("error")||s.includes("Error"))return a();let r=sr();return nr(e,r),a()}var te={"posttool/audit-logger":A,"posttool/unified-error-handler":pt,"posttool/auto-lint":gt,"posttool/context-budget-monitor":kt,"posttool/coordination-heartbeat":j,"posttool/mem0-webhook-handler":N,"posttool/memory-bridge":P,"posttool/realtime-sync":M,"posttool/session-metrics":F,"posttool/skill-edit-tracker":U,"posttool/calibration-tracker":B,"posttool/unified-dispatcher":Gt,"posttool/write/code-style-learner":J,"posttool/write/coverage-predictor":Kt,"posttool/write/naming-convention-learner":q,"posttool/write/readme-sync":Xt,"posttool/write/release-lock-on-commit":Vt,"posttool/bash/issue-progress-commenter":K,"posttool/bash/issue-subtask-updater":X,"posttool/bash/pattern-extractor":W,"posttool/skill/skill-usage-optimizer":Z,"posttool/write-edit/file-lock-release":Qt};function Qi(t){return te[t]}function ta(){return Object.keys(te)}export{$r as escapeRegex,de as extractIssueNumber,dr as getCachedBranch,ce as getCurrentBranch,Tr as getDefaultBranch,g as getField,le as getGitStatus,Qi as getHook,st as getLogDir,re as getLogLevel,T as getPluginRoot,p as getProjectDir,Ir as getRepoRoot,f as getSessionId,Rr as hasUncommittedChanges,te as hooks,or as isBashInput,ar as isEditInput,wr as isGitRepo,ue as isProtectedBranch,cr as isReadInput,ir as isWriteInput,ta as listHooks,u as logHook,_r as logPermissionFeedback,xr as normalizeCommand,hr as outputAllowWithContext,gr as outputBlock,Sr as outputDeny,yr as outputError,fr as outputPromptContext,pr as outputSilentAllow,a as outputSilentSuccess,kr as outputWarning,mr as outputWithContext,br as readHookInput,oe as shouldLog,Ar as validateBranchName};
//# sourceMappingURL=posttool.mjs.map
