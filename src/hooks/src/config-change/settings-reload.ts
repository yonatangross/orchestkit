// Generated by OrchestKit Claude Plugin
// Created: 2026-02-27

/**
 * ConfigChange Hook: Settings Reload
 *
 * Fires when .claude/settings.json or project config changes mid-session.
 * Logs the change and emits advisory context so Claude knows settings shifted.
 *
 * CC 2.1.50+ fires ConfigChange automatically when config files are modified.
 *
 * @see https://docs.anthropic.com/en/docs/claude-code/hooks
 */

import type { HookInput, HookResult } from '../types.js';
import { logHook, outputPromptContext } from '../lib/common.js';

export function settingsReload(input: HookInput): HookResult {
  const sessionId = input.session_id || 'unknown';

  logHook('config-change', `Settings changed mid-session (session: ${sessionId})`);

  return outputPromptContext(
    '[ConfigChange] Project or user settings were modified during this session. ' +
    'Permission rules, hook configurations, or plugin settings may have changed. ' +
    'If a permission was just granted or revoked, it takes effect immediately.'
  );
}
