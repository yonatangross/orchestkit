// Generated by OrchestKit Claude Plugin
// Created: 2026-02-18

/**
 * CC Session JSONL Parser â€” Type definitions
 * Issue #691: Parse Claude Code session files for analytics
 */

export interface SessionTokenUsage {
  input_tokens: number;
  output_tokens: number;
  cache_creation_input_tokens: number;
  cache_read_input_tokens: number;
}

export interface TimelineEvent {
  timestamp: string;
  type: 'tool_call' | 'agent_spawn' | 'agent_complete' | 'hook' | 'message' | 'error';
  name: string;
  details?: string;
  tokens?: SessionTokenUsage;
  duration_ms?: number;
}

export interface SessionSummary {
  sessionId: string;
  startTime: string;
  endTime: string;
  durationMs: number;
  branch?: string;
  version?: string;
  totalTokens: SessionTokenUsage;
  toolCalls: { name: string; count: number }[];
  agentSpawns: { id: string; type?: string }[];
  hookEvents: { name: string; count: number }[];
  messageCount: number;
  cacheHitRate: number;
}

export interface ParsedSession {
  summary: SessionSummary;
  timeline: TimelineEvent[];
}

/** Mutable state accumulated while parsing JSONL lines */
export interface ParseAccumulator {
  timeline: TimelineEvent[];
  totalTokens: SessionTokenUsage;
  toolCounts: Map<string, number>;
  hookCounts: Map<string, number>;
  agents: { id: string; type?: string }[];
  messageCount: number;
  startTime: string;
  endTime: string;
  branch?: string;
  version?: string;
  sessionId: string;
}
