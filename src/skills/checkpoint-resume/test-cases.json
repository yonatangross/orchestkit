{
  "skill": "checkpoint-resume",
  "version": "2.0.0",
  "testCases": [
    {
      "id": "fresh-start-no-state-file",
      "rule": null,
      "query": "I need to implement a large feature spanning 10+ files and several GitHub issues",
      "expectedBehavior": [
        "Detects no .claude/pipeline-state.json exists and prompts for task description",
        "Asks the user to describe all phases of the task",
        "Runs scripts/init-pipeline.sh <branch> to write initial state with all phases set to pending",
        "Begins Phase 1 after state is initialized, following phase-ordering rules"
      ]
    },
    {
      "id": "resume-from-existing-state",
      "rule": "state-write-timing",
      "query": "Resume my interrupted migration pipeline",
      "expectedBehavior": [
        "Detects .claude/pipeline-state.json exists and runs scripts/show-status.sh",
        "Displays human-readable progress summary showing completed, in-progress, and pending phases",
        "Asks whether to resume from the last incomplete phase, pick a different phase, or restart",
        "Continues from the correct phase after user confirmation, not from Phase 1"
      ]
    },
    {
      "id": "phase-failed-mid-execution",
      "rule": "ordering-priority",
      "query": "The pipeline stopped mid-way through the file-writing phase due to a rate limit",
      "expectedBehavior": [
        "State file shows the failed phase as in-progress or failed, not completed",
        "Reads resume-decision-tree references/resume-decision-tree.md to determine recovery path",
        "Does not rerun already-completed earlier phases (GitHub issues, commits)",
        "Resumes from the failed phase, re-attempting only incomplete work within that phase"
      ]
    },
    {
      "id": "all-phases-complete",
      "rule": "state-write-timing",
      "query": "Check the pipeline status â€” I think everything is done",
      "expectedBehavior": [
        "Runs scripts/show-status.sh and finds all phases marked as completed",
        "Reports the pipeline as fully complete with a summary of all phases executed",
        "Does not prompt for resume or additional phases",
        "Optionally suggests cleaning up .claude/pipeline-state.json or archiving it"
      ]
    }
  ]
}
