{
  "skill": "validate-counts",
  "version": "2.0.0",
  "testCases": [
    {
      "id": "all-counts-match",
      "rule": null,
      "query": "Validate that all counts are consistent across OrchestKit",
      "expectedBehavior": [
        "Runs scripts/validate-counts.sh from repo root",
        "Compares skill, hook, and agent counts from src/ vs CLAUDE.md and manifests",
        "Outputs a comparison table showing all sources agree",
        "Reports 'All counts consistent.' with no drift flags"
      ]
    },
    {
      "id": "hook-count-drifted",
      "rule": "drift-reporting",
      "query": "Check if counts are up to date after I added a new hook",
      "expectedBehavior": [
        "Detects hook count in CLAUDE.md Project Overview does not match hooks.json entry count",
        "Flags drift with exact file and field reference (e.g., CLAUDE.md:line 5 says 87, found 88)",
        "Outputs comparison table row showing src/ count vs CLAUDE.md count",
        "Suggests updating CLAUDE.md Project Overview and Version section to match"
      ]
    },
    {
      "id": "skill-count-drifted",
      "rule": "sources-authoritative",
      "query": "Validate counts — I just added a skill to src/skills/ but haven't rebuilt yet",
      "expectedBehavior": [
        "Uses src/ filesystem as authoritative source, not plugins/",
        "Detects skill count mismatch between src/skills/ directories and manifest array length",
        "Flags drift with precise reference to manifests/ork.json skills array",
        "Uses only manifests/ork.json — no alias manifests exist in v7"
      ]
    },
    {
      "id": "claude-md-outdated",
      "rule": "drift-reporting",
      "query": "CLAUDE.md Project Overview seems wrong, validate all counts",
      "expectedBehavior": [
        "Reads CLAUDE.md Project Overview to extract stated skill, agent, and hook counts",
        "Reads manifests/ork.json to compare declared counts",
        "Identifies which specific count in CLAUDE.md is stale",
        "Outputs flags for each mismatched field with file:field location for easy correction"
      ]
    }
  ]
}
